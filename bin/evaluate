#!/usr/bin/env python3
# -*- coding: UTF-8 -*-

# Copyright 2017 Eddie Antonio Santos <easantos@ualberta.ca>
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

"""
Evaluate the Java models.
"""

# TODO: check sensibility.current_language instead of hard-coding this for Java.

import argparse
import sys
from pathlib import Path

from unnaturalcode.validation.languages.java import JavaValidationMain  # type: ignore


parser = argparse.ArgumentParser()
parser.add_argument('-o', '--out', type=Path,
                    help='Where to output the results database')
parser.add_argument('--fix', choices=('dual', 'left', 'right'),
                    help='The strategy for fixing')
parser.add_argument('--models', type=Path, required=True,
                    help='Common prefix the path to forwards/backwards models')
args = parser.parse_args()


if args.fix != 'dual':
    raise NotImplementedError("I didn't get around to that yet.")

print(args)
sys.exit(1)


def invoke_unnaturalcode():
    # XXX: Override sys.argv so that JavaValidation's main works
    sys.argv = [
        # argv[0]: pretend this is the argument name.
        'unnaturalcode-evaluation',

        '--tool', 'sensibility',
        '--discard-identifiers',
        '--keep-corpus',
        '--mutation', 'null',
        '--pair-file-limit', number_to_evaluate,
        '--pair-file-list', pair_list_file,
        '--output-dir', fake_output_directory
    ]

    JavaValidationMain().main()
